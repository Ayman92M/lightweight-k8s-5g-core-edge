# -----------------------------
# free5gc.env — Lab configuration for main.sh
# -----------------------------
# This file is sourced by installation/main.sh (Step 0).
# It defines:
#   - where charts are stored
#   - Kubernetes namespace + Helm release names
#   - node placement (labels/node names)
#   - NIC/subnet settings for N6 + UPF N6 IPs
#   - local PersistentVolume paths (hostPath/local PV style)
#   - optional image overrides (Mongo)
#


# -----------------------------
# 1) Base locations (where charts live on the control-plane machine)
# -----------------------------
# Base directory on the machine where you run installation/main.sh (i.e. the "master" node, where you run Helm commands and store charts).
MASTER_BASE_DIR="/home/aymamost100"


# Chart repository location (derived from MASTER_BASE_DIR)
# main.sh/Step 03 uses these when cloning and locating charts
REPO_DIR="${MASTER_BASE_DIR%/}/free5gc-helm"
CHARTS_DIR="${REPO_DIR}/charts"



# -----------------------------
# 2) Kubernetes + Helm release naming
# -----------------------------
# Namespace where Free5GC and UERANSIM will be deployed
NAMESPACE="free5gc"

# Helm release names (appear in `helm list -n <namespace>`)
FREE5GC_RELEASE="core"
UERANSIM_RELEASE="ueransim"


# -----------------------------
# 3) Workload placement via node labels (nodeSelector.workload)
# -----------------------------
# Step 02 typically labels nodes like:
#   kubectl label node <node> workload=<value>
# Step 03 patches values.yaml to use nodeSelector.workload=<value>
CORE5G_WORKLOAD_VALUE="k8sCore5g"
UERANSIM_WORKLOAD_VALUE="k8sUeransim"



# -----------------------------
# 4) Network interface names (NICs) used by Multus/ipvlan networks
# -----------------------------
# These must match the interface name on the node where the pod will run.
# Example: `ip link` on the target node should show "ens18".
#
# Used when patching Helm values for networks like n6network (and others).
CORE5G_NIC="ens18"
UERANSIM_NIC="ens18"


# -----------------------------
# 5) Helm values key paths (chart-specific)
# -----------------------------
# Different chart forks structure values differently.
# These keys tell the patching script "where" in values.yaml to write network config.
#
# If your chart uses global.n6network, use:
#   FREE5GC_N6_BASE_KEY="global.n6network"
# Otherwise (your current chart):
FREE5GC_N6_BASE_KEY="n6network"
FREE5GC_MASTERIF_KEY="n6network.masterIf"



# -----------------------------
# 6) N6 network configuration (Multus + Whereabouts / ipvlan)
# -----------------------------
# Subnet settings for N6 (typically the UPF external-facing interface subnet).
# Notes:
# - N6_SUBNET + N6_CIDR define the pool. Here: 10.91.0.0/16
# - N6_GATEWAY should be reachable from the node(s) (routing matters)
# - N6_EXCLUDE prevents Whereabouts from handing out a reserved IP 
N6_SUBNET="10.91.0.0"
N6_CIDR="16"
N6_GATEWAY="10.91.0.1"
N6_EXCLUDE="10.91.0.254"



# -----------------------------
# 7) UPF N6 interface IPs (static addresses inside the N6 subnet)
# -----------------------------
# These are assigned to UPF-related components on the N6 network.
# Keep them inside the N6 subnet and avoid collisions with real hosts.
#
# Your chart likely maps these into specific UPF instances.
# usually only 3 needed (e.g. upf, upf1, upf2), but in new charts you might have anothe name (e.g. iupf1, psaupf1, psaupf2).
UPF_IP0="10.91.254.200"   # upf
UPF_IP1="10.91.254.201"   # upf1
UPF_IP2="10.91.254.202"   # upf2
UPF_IP3="10.91.254.203"   # upfb
UPF_IP4="10.91.254.204"   # iupf1
UPF_IP5="10.91.254.205"   # psaupf1
UPF_IP6="10.91.254.206"   # psaupf2


# -----------------------------
# PersistentVolumes (local PVs for Free5GC)
# These paths MUST be on the CORE5G WORKER node filesystem.
# -----------------------------



# -----------------------------
# 8) PersistentVolumes (local PVs for Free5GC)
# -----------------------------
# These paths MUST exist on the node that hosts the PV data.
# If you're using hostPath/local PV patterns:
# - the directory must be created on the correct worker node
# - permissions must allow the pod to read/write
#
# IMPORTANT:
# CORE5G_NODE_NAME must match the Kubernetes node name:

CORE5G_NODE_NAME="muhausma-15352-vm2"
UERANSIM_NODE_NAME="muhausma-15352-vm4"


# Base directory ON THE CORE5G NODE filesystem where PV folders live
PV_BASE_DIR="/home/aymamost100"

# Absolute PV directories on the CORE5G node
PV_MONGO_DIR="${PV_BASE_DIR}/mongo"
PV_CERT_DIR="${PV_BASE_DIR}/cert"

# PV resource names (cluster-scoped objects)
PV_MONGO_NAME="free5gc-pv-mongo"
PV_CERT_NAME="free5gc-pv-cert"


# -----------------------------
# 9) MongoDB (Free5GC dependency) — image override
# -----------------------------
# Some charts try to pull an old MongoDB image that may no longer be available on Docker Hub.
# To avoid pull errors, you can specify an alternative image repository and tag.
MONGO_REPO="bitnamilegacy/mongodb"
MONGO_TAG="7.0.9-debian-12-r4"

